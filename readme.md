### BBT-tools

BBT -> 巴别塔

![bbt-tools]()

多语言提取/维护工具

---

#### 初衷

在多语言的开发中，维护各个语言环境下的翻译内容是一件比较繁琐的事

- 如何知道指定 key 是否存在语言缺失的情况
- key 是否会存在冲突
- 语言环境的维护
- 翻译内容迁移问题
- 如何将原始文本提取出来交给翻译人员翻译
- 使用免费的翻译 API 翻译内容
- 多人员开发导致的冲突

`bbt-tools`就是用来处理以上问题的

- 如何知道指定 key 是否存在语言缺失的情况
- 如何将原始文本提取出来交给翻译人员翻译

  `bbt-tools`会收集指定目录下符合规则的所有文件，并根据文件名判断该文件是属于哪种语言环境下的内容（`xxx/zh.tr`即为`zh`下的内容）, 最后整理到一个`excel`文件里， 用户可以通过`excel`自带的筛选可以很直观的知道对应的缺失内容，以及，如果需要交给翻译人员翻译，那么也只需要将该表发送给对应的人员翻译即可，翻译完之后，可以通过`bbt-tools build`将`excel`的内容更新到对应的文件里

- 语言环境的维护

  假设我们现在有`zh`,`en`,`jp`三个语言环境，现在需要新增一个`th`的语言环境，可以直接在`bbt.config.json`的`langs`里添加`th`即可，`bbt-tools`在运行时，会自动的生成`th`环境下的翻译内容（虽然会生成，但是每一个 key 所对应的内容为`''`）;

- key 是否会存在冲突

  我们可以通过协商/命名空间/局部作用域来一定程度上的规避此问题，但是难免会出现`key`重复的情况， `bbt-tools`在运行时会检测`key`是否存在重复的情况

- 翻译内容迁移问题

  默认情况下，如果我们要移动翻译内容，那么需要修改多个文件，`bbt-tools`会在运行时检测对应的`key`的文件路径跟之前的是否一致，不一致的话，那么会更新对应的路径，因此我们只需要更改一个文件即可。

- 使用免费的翻译 API 翻译内容

  内置`google`以及`DeepL`翻译 API, 可以直接开箱即用（请自行解决连不上`google`服务器的问题）， 也可以自行扩展翻译接口，使用自己喜欢的翻译 API 进行翻译，不需要考虑如果收集信息、还原翻译内容的问题；

- 多人员开发导致的冲突

  多人员同时处理一个文本的时候，因为编码习惯、插入/修改位置不一致，会导致`git`难以准确追踪每一个`key`的变更记录。
  `bbt-tools`在生成文件的时候，会对`key`做一次排序，从而可以使得`git`可以精准的追踪每一个`key`的变化，方便我们更加轻松的处理冲突

#### [设计](./docs/design.md)

#### [如何使用](./docs/use.md)
